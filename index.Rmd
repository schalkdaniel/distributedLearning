---
output: github_document
---

## Create Test Datasets

```{r}
library(nycflights13)

mydf = as.data.frame(flights)

splits = 3L

breaks = seq(1, nrow(mydf), length.out = splits + 1)

for (i in seq_len(splits)) {
	temp = mydf[breaks[i]:breaks[i + 1], ]
	write.csv(x = temp, file = paste0("data/flights", i, ".csv"), row.names = FALSE)
}

```


## Run Gradient Descent

```{r}
Rcpp::sourceCpp("src/gradient_descent.cpp")
source("R/grad_descent_lm.R")

myformula = formula(Petal.Length ~ Sepal.Length + Petal.Width)

(mod.lm = lm(myformula, data = iris))

mybeta = lmGradientDescent(myformula, data = iris, iters = 10000L, learning_rate = 0.1,
	mse_eps = 1e-9, trace = FALSE)

data.frame(lm = coef(mod.lm), grad.descent = mybeta$beta, diff = coef(mod.lm) - mybeta$beta)
```

## Distributed Linear Model

```{r}
files = paste0("data/", c("flights1.csv", "flights2.csv", "flights3.csv"))

```